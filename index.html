<!DOCTYPE HTML>
<html>
<head>
    <title>Pan de la Sierra</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript>
</head>
<body class="is-preload">

    <!-- Wrapper -->
    <div id="wrapper">

        <!-- Header -->
        <header id="header">
            <div class="logo">
                <img src="images/logo.png" alt="Pan de la Sierra Logo" id="logo-image" />
            </div>
            <div class="content">
                <div class="inner">
                    <h1 data-translate="title">Pan de la Sierra</h1>
                    <p data-translate="slogan">Haciendo pan del bueno</p>
                    <h4 data-translate="ultimo_pedido">Próxima venta de pan: Sábado 17 de Agosto. Último día para pedidos: Viernes 16 de Agosto a las 7:00 p.m.</h4>
                    <h4 data-translate="restante">Tiempo restante para tomar pedidos: </h4><h3 id="countdown-timer"></h3>
                </div>
            </div>
            <nav>
                <ul>
                    <li><a href="#orders" data-translate="orders" onclick="accessForm()">Haz tu Pedido</a></li>
                </ul>
            </nav>
            <!-- Language Switcher -->
            <div class="language-switcher" id="language-switcher">
                <button onclick="switchLanguage('es')">Español</button>
                <button onclick="switchLanguage('en')">English</button>
            </div>
        </header>

        <!-- Main -->
        <div id="main">
            <article id="orders">
                <h2 class="major" data-translate="order-title">Comienza tu orden</h2>
                <div class="form-container">
                    <form method="post" action="#" autocomplete="off" name="google-sheet">
                        
                        <h4 data-translate="order-note">**Estas órdenes se entregarán el Sabado 17 de Agosto.</h4>
                        <label for="name" data-translate="name-label">Nombre y apellido para la orden:</label>
                        <input type="text" name="name" placeholder="Charles Spurgeon" required/><br>
                        <label for="phone" data-translate="phone-label">Número de teléfono: (Requerido para la confirmación del pedido)</label>
                        <input type="text" name="phone" id="phone" placeholder="123-456-7890" required/><br>

                        <h3 data-translate="choose-breads">Elegir panes ($2.00 cada pan)</h3> 

                        <label for="bread1" data-translate="bread1">Pan Sencillo:</label>
                        <select name="bread1">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                        </select><br>
                        
                        <label for="bread2" data-translate="bread2">Pan Azucarado (Cubierto con azúcar antes de hornear):</label>
                        <select name="bread2">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                        </select><br>

                        <label for="bread3" data-translate="bread3">Pan Revolcado (metido en azúcar después de hornear):</label>
                        <select name="bread3">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                        </select><br>



                        <label for="bread4" data-translate="bread4">Pan con Barniz (Concha):</label>
                        <select name="bread4">
                            <option value="0">0</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                            <option value="10">10</option>
                            <option value="11">11</option>
                            <option value="12">12</option>
                            <option value="13">13</option>
                            <option value="14">14</option>
                            <option value="15">15</option>
                        </select><br>
                            
                            <label for="message" data-translate="special-instructions">Instrucciones Especiales:</label>
                            <textarea name="message" id="message" rows="4"></textarea><br>

                            <div class="payment-container">
                                <h4 data-translate="payment">**Solo pago en efectivo**</h4>
                                <a data-translate="Instructions1">**Una vez que oprima el botón de [Enviar Orden], espere unos segundos para recibir un mensaje de confirmación**</a><br><br>
                            </div>
                            

                        <!--Buttons-->
                        <div class="button-container" text-align="center">
                            <button type="submit" name="submit" data-translate="submit">Enviar Orden</button>
                        </div>
                    </form>
                </div>

                <script>
                    const scriptURL = 'https://script.google.com/macros/s/AKfycbz4APB8S-Tbkz-kVK04D5Bow5grToTaW2LizCfYLGcLYPUxb4Wcdi4zYpWo_CfKRIWgHg/exec';
                    const form = document.forms['google-sheet'];

                    form.addEventListener('submit', e => {
                        e.preventDefault();
                        fetch(scriptURL, { method: 'POST', body: new FormData(form) })
                            .then(response => {
                                const language = getLanguage();
                                if (language === 'es') {
                                    alert("¡Gracias por tu Orden! En unos momentos confirmaremos tu orden");
                                } else {
                                    alert("Thank you for your order! In a few moments, we will confirm your order");
                                }
                                form.reset(); // Clear the form fields
                            })
                            .catch(error => console.error('Error!', error.message));
                    });

                    // Function to set the language
                    function setLanguage(lang) {
                        localStorage.setItem('language', lang);
                        switchLanguage(lang);
                    }

                    // Function to get the selected language
                    function getLanguage() {
                        return localStorage.getItem('language') || 'es'; // default to 'es' if not set
                    }

                    // Function to switch language and update text
                    function switchLanguage(language) {
                        document.querySelectorAll('[data-translate]').forEach(element => {
                            const key = element.getAttribute('data-translate');
                            element.innerText = translations[language][key];
                        });
                    }

                    // Set default language to Spanish on page load
                    document.addEventListener('DOMContentLoaded', () => {
                        const language = getLanguage();
                        switchLanguage(language);
                    });

                    // Access control for form
                    function accessForm() {
                        sessionStorage.setItem('formAccess', 'true');
                    }

                    function checkFormAccess() {
                        if (sessionStorage.getItem('formAccess') !== 'true') {
                            alert("You must click 'Haz tu Pedido' to access the form.");
                            window.location.href = '#';
                        }
                        sessionStorage.removeItem('formAccess');
                    }

                    document.addEventListener('DOMContentLoaded', () => {
                        checkFormAccess();
                    });
                </script>

                <!-- Commented the Social Media Icons
                    <ul class="icons">
                        <li><a href="#" class="icon brands fa-twitter"><span class="label">Twitter</span></a></li>
                        <li><a href="#" class="icon brands fa-facebook-f"><span class="label">Facebook</span></a></li>
                        <li><a href="#" class="icon brands fa-instagram"><span class="label">Instagram</span></a></li>
                        <li><a href="#" class="icon brands fa-github"><span class="label">GitHub</span></a></li>
                    </ul>-->

            </article>

        </div>
        
        <!-- Footer -->
        <footer id="footer">
            <p class="copyright">Pan de la Sierra 2024. Template design by: <a href="https://html5up.net">HTML5 UP</a>.</p>
        </footer>

    </div>

    <!-- BG -->
    <div id="bg"></div>

    <!-- Scripts -->
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/js/browser.min.js"></script>
    <script src="assets/js/breakpoints.min.js"></script>
    <script src="assets/js/util.js"></script>
    <script src="assets/js/main.js"></script>

    <!-- Translation Script -->
    <script>
        const translations = {
            es: {
                title: "Pan de la Sierra",
                slogan: "Haciendo pan del bueno",
                ultimo_pedido: "Próxima venta de pan: Sábado 17 de Agosto. Último día para pedidos: Viernes 16 de Agosto a las 7:00 p.m.",
                restante: "Tiempo restante para tomar pedidos: ",
                orders: "Haz tu Pedido",
                "order-title": "Comienza tu orden",
                "order-note": "**Estas órdenes se entregarán el Sábado 17 de Agosto.",
                "name-label": "Nombre y apellido para la Orden:",
                "NameLastName": "Nombre y appelido",
                "phone-label": "Número de teléfono: (Requerido para la confirmación del pedido)",
                "choose-breads": "Elegir panes ($2.00 cada pan)",
                bread1: "Pan Sencillo:",
                bread2: "Pan Azucarado (Cubierto con azúcar antes de hornear):",
                bread3: "Pan Revolcado (Metido en azúcar después de hornear):",
                bread4: "Pan con Barniz (Concha):",
                "special-instructions": "Instrucciones Especiales:",
                payment:"Pago en efectivo",
                Instructions1: "**Una vez que oprima el botón de [Enviar Orden], espere unos segundos para recibir un mensaje de confirmación**",
                submit: "Enviar Orden",
                reset: "Borrar Orden"
            },
            en: {
                title: "Pan de la Sierra",
                slogan: "Making that good bread",
                ultimo_pedido: "Next bread sale is: Saturday August 17th. Last day for orders: Friday, August 16, 7:00pm",
                restante: "Remaining time to take orders: ",
                orders: "Make an Order",
                "order-title": "Start Your Order",
                "order-note": "**These orders will be delivered on Saturday, August 17th",
                "name-label": "First and last name for Order:",
                "NameLastName": "Name and last name",
                "phone-label": "Phone Number: (Required for order confirmation)",
                "choose-breads": "Choose Bread ($2.00 per bread)",
                bread1: "Plain Bread:",
                bread2: "Sugared Bread (Topped with sugar before baking):",                
                bread3: "Rolled Bread (Dipped in sugar after baking):",
                bread4: "Glazed Bread (A Concha Bread):",
                "special-instructions": "Special Instructions:",
                payment:"Payment in cash",
                Instructions1: "**Once you press the -Submit Order- button, wait a few seconds to receive a confirmation message**",
                submit: "Submit Order",
                reset: "Reset Order"
            }
        };

        document.addEventListener('DOMContentLoaded', () => {
            const language = getLanguage();
            switchLanguage(language);
        });

        function switchLanguage(language) {
            document.querySelectorAll('[data-translate]').forEach(element => {
                const key = element.getAttribute('data-translate');
                if (translations[language][key]) {
                    element.innerText = translations[language][key];
                }
        });
            updateCountdownMessage();
        }

        function getLanguage() {
            return localStorage.getItem('language') || 'es';
        }

        document.getElementById('language-switcher').addEventListener('click', (event) => {
            if (event.target.tagName === 'BUTTON') {
                const language = event.target.innerText.toLowerCase() === 'english' ? 'en' : 'es';
                setLanguage(language);
            }
        });

        function setLanguage(lang) {
            localStorage.setItem('language', lang);
            switchLanguage(lang);
        }

        // Countdown Timer Script
        function updateCountdownMessage() {
            const language = getLanguage();
            let message;
            if (language === 'es') {
                message = "| AL MOMENTO NO ESTAMOS TOMANDO ÓRDENES |";
            } else {
                message = "| AT THIS MOMENT WE ARE NO LONGER TAKING ORDERS |";
            }
            document.getElementById("countdown-timer").innerHTML = message;
        }

        var countDownDate = new Date("August 16, 2024 19:00:00").getTime(); // Update to your actual end time

        var x = setInterval(function() {
            var now = new Date().getTime();
            var distance = countDownDate - now;
            var days = Math.floor(distance / (1000 * 60 * 60 * 24));
            var hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            var minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
            var seconds = Math.floor((distance % (1000 * 60)) / 1000);

            document.getElementById("countdown-timer").innerHTML = days + "d " + hours + "h " + minutes + "m " + seconds + "s ";

            if (distance < 0) {
                clearInterval(x);
                updateCountdownMessage(); // Update message when countdown ends
                document.querySelector('a[href="#orders"]').removeAttribute("href"); // Remove the href attribute
                document.querySelector('a[href="#orders"]').style.pointerEvents = 'none'; // Disable clicking
                document.querySelector('a[href="#orders"]').style.color = 'gray'; // Optional: Change color to indicate disabled state
            }
        }, 1000);
    </script>
</body>
</html>
